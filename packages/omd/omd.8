.\"                                      Hey, EMACS: -*- nroff -*-
.\" First parameter, NAME, should be all caps
.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
.\" other parameters are allowed: see man(7), man(1)
.TH OMD SECTION "August  7, 2010"
.\" Please adjust this date whenever revising the manpage.
.\"
.\" Some roff macros, for reference:
.\" .nh        disable hyphenation
.\" .hy        enable hyphenation
.\" .ad l      left justify
.\" .ad b      justify to both left and right margins
.\" .nf        disable filling
.\" .fi        enable filling
.\" .br        insert line break
.\" .sp <n>    insert n+1 empty lines
.\" for manpage-specific macros, see man(7)
.SH NAME
omd \- admin interface for OMD, the Open Monitoring Distribution
.SH SYNOPSIS
.B omd
.RI [ command 
.RI [ site... ] 
.RI ]
.SH DESCRIPTION
.B OMD - the Open Monitoring Distribution
is nothing really new. OMD bundles existing open source software to 
ease the installation procedure of Nagios and many important addons 
like NagVis, PNP4Nagios, rrdtool, nagios-plugins, Check_MK, 
MK Livestatus, Dokuwiki, NSCA, check_nrpe and others.
.PP
.\" TeX users may be more comfortable with the \fB<whatever>\fP and
.\" \fI<whatever>\fP escape sequences to invode bold face and italics,
.\" respectively.
\fBomd\fP is the administration interface for creating and maintaining 
sites within OMD - the open monitoring distribution.
.SH COMMANDS
Type 
.B omd
or
.B omd help
to get an overview over all available commands.
.TP
.B omd help
Show short summary of available commands.
.TP
.B omd version
Show the default version of you OMD installation. OMD supports
multiple versions to be installed in parallel.
.TP
.B omd versions                    
Show a list of all installed versions of OMD.
.TP
.B omd setup                       
Prepare operating system for OMD. This includes installing all software
packages from your linux distribution that the components of OMD need
to run properly. You need to make sure that a package installation via
aptitude/zypper/yum is possible.

After installing missing packages a group \fBomd\fP will be created,
some Apache modules will be activated, the init script \fB/etc/init.d/omd\fP
will be activated and the SUID bits for some Nagios plugins will be
correctly configured (for the group omd).

\fBNote:\fP If you have installed OMD via RPM or DEB and have installed
all packages the omd package depends on, no \fBomd setup\fP is neccessary.
.TP
.B omd uninstall                   
This deletes all software and data of OMD. That command is mainly used
for trying out OMD or testing the installation of OMD. Be aware that
all your monitoring configuration and data will be lost!

If you've installed omd via RPM or DEB, you still need to remove
the RPM/DEB packages after that.
.TP
.B omd sites                       
Show a list of all sites and the version of OMD each site uses.
.TP
.B omd create     SITE             
Create a new site. The name of the site must be at most 16 characters
long and consist only of letters, digits and underscores. It must not
begin with a digit. 

OMD creates an operating system user and group with the name of the
site. Therefore no user or group with that name must exist. The a 
directory \fB/omd/sites/\fPSITE will be created and used as the new
users home directory.

You need root permissions for creating a new site.

After creating a new site you can do a \fBsu - \fPSITE and start
the site with \fBomd start\fP.
.TP
.B omd rm         SITE             
Remove a site and all of its data. This includes deleting the
directory \fB/omd/sites/\fPSITE and removing the system user
and group of that site. This - of course - needs root permissions.
.TP
.B omd mv         SITE NEWNAME     
Rename a site. The site must be stopped. the NEWNAME must be a valid
site name as described in "omd create".
.TP
.B omd cp         SITE NEWNAME     
Make a copy of a site
.TP
.B omd update     SITE             
Update site to version 0.42.2
.TP
.B omd start      [SITE]           
Start services of one or all sites
.TP
.B omd stop       [SITE]           
Stop services of site(s)
.TP
.B omd restart    [SITE]           
Restart services of site(s)
.TP
.B omd reload     [SITE]           
Reload services of site(s)
.TP
.B omd status     [SITE]           
Show status of services of site(s)
.TP
.B omd config     SITE ...         
Show and set site configuration parameters
.SH SEE ALSO
.BR http://www.omdistro.org
.br
.SH AUTHOR
omd was written by Mathias Kettner <mk@mathias-kettner.de>.
See /usr/share/doc/omd/TEAM for contributors to omd.
.PP
This manual page was written by Wolfgang Barth <wob@swobspace.net>,
for the use with omd in any distribution.
